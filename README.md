# masque-vpn

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/iselt/masque-vpn)

VPN-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ MASQUE (CONNECT-IP) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ QUIC.

**‚ö†Ô∏è –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–µ –≥–æ—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –û–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ MASQUE.**

**–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–º–æ–¥—É–ª—å `connect-ip-go`. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å —Ñ–ª–∞–≥–æ–º `--recurse-submodules`:**

```bash
git clone --recurse-submodules https://github.com/twogc/masque-vpn.git
```

–ò–ª–∏ –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone --recurse-submodules https://github.com/iselt/masque-vpn.git
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã**: –ü–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ QUIC –∏ MASQUE CONNECT-IP
- **–í–∑–∞–∏–º–Ω–∞—è TLS-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Windows, Linux –∏ macOS
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–ª–æ–º IP**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞–º –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- **FEC (Forward Error Correction)**: –£–ø—Ä–µ–∂–¥–∞—é—â–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –æ—à–∏–±–æ–∫ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ —Å–µ—Ç—è—Ö —Å –ø–æ—Ç–µ—Ä—è–º–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Prometheus –∏ –¥–∞—à–±–æ—Ä–¥—ã Grafana
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**: –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π:

- üìö **[–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å—Ç—É–¥–µ–Ω—Ç–∞](docs/development/student-guide.ru.md)**: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É, –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã.
- üèó **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/architecture/architecture.ru.md)**: –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
- üîå **[API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/api/api.ru.md)**: –û–ø–∏—Å–∞–Ω–∏–µ HTTP API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
- üìä **[–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](docs/monitoring/setup.ru.md)**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus –∏ Grafana.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:
- **VPN-—Å–µ—Ä–≤–µ—Ä**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é —Ç—Ä–∞—Ñ–∏–∫–∞
- **VPN-–∫–ª–∏–µ–Ω—Ç**: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- **–°–∏—Å—Ç–µ–º–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤**: PKI-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–∑–∞–∏–º–Ω–æ–≥–æ TLS

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–±–æ—Ä–∫–∞

```bash
cd vpn_client && go build
cd ../vpn_server && go build
cd ../admin_webui && npm install && npm run build
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
cd vpn_server/cert
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CA-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sh gen_ca.sh
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sh gen_server_keypair.sh
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞:
```bash
cp vpn_server/config.server.toml.example vpn_server/config.server.toml
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd vpn_server
sudo ./vpn-server
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –¥–ª—è macOS**: –ù–∞ macOS —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è TUN-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

### 5. –í–µ–±-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

- –ê–¥—Ä–µ—Å: `http://<server-ip>:8080/`
- –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admin` / `admin`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### 6. –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞

```bash
cd vpn_client
sudo ./vpn-client
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `config.server.toml`:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|----------|--------|
| `listen_addr` | –ê–¥—Ä–µ—Å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ | `"0.0.0.0:4433"` |
| `assign_cidr` | –î–∏–∞–ø–∞–∑–æ–Ω IP –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ | `"10.0.0.0/24"` |
| `advertise_routes` | –ú–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è | `["0.0.0.0/0"]` |
| `cert_file` | –ü—É—Ç—å –∫ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É | `"cert/server.crt"` |
| `key_file` | –ü—É—Ç—å –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É —Å–µ—Ä–≤–µ—Ä–∞ | `"cert/server.key"` |

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `server_addr` | –ê–¥—Ä–µ—Å VPN-—Å–µ—Ä–≤–µ—Ä–∞ |
| `server_name` | –ò–º—è —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è TLS |
| `ca_pem` | CA-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) |
| `cert_pem` | –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) |
| `key_pem` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∫–ª–∏–µ–Ω—Ç–∞ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) |

## –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è, –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∏—Ö IP-–∞–¥—Ä–µ—Å–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **QUIC**: [quic-go](https://github.com/quic-go/quic-go) - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ QUIC
- **MASQUE**: [connect-ip-go](https://github.com/quic-go/connect-ip-go) - –ø—Ä–æ—Ç–æ–∫–æ–ª MASQUE CONNECT-IP
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **TUN**: –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TUN-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–í–∑–∞–∏–º–Ω—ã–π TLS**: –ö–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–¶–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**: –°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π CA –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID –∫–ª–∏–µ–Ω—Ç–æ–≤**: –ö–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **–ò–∑–æ–ª—è—Ü–∏—è IP**: –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ IP-–∞–¥—Ä–µ—Å–∞

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
masque-vpn/
‚îú‚îÄ‚îÄ common/           # –û–±—â–∏–π –∫–æ–¥ –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ vpn_client/       # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ vpn_server/       # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ cert/         # –°–∫—Ä–∏–ø—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ admin_webui/      # –†–µ—Å—É—Ä—Å—ã –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îî‚îÄ‚îÄ README.md
```

### –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Go 1.25.0 –∏–ª–∏ –Ω–æ–≤–µ–µ
- OpenSSL (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤)
- Node.js –∏ npm (–¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—à–∏–±–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CA –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏**: –°–æ–∑–¥–∞–Ω–∏–µ TUN-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. **Firewall**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 4433) –¥–æ—Å—Ç—É–ø–µ–Ω
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å MTU**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã MTU –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã –Ω–∞ macOS

–ù–∞ macOS –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å TUN-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏:

1. **"Destination address required"**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ - TUN-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ macOS —Ç—Ä–µ–±—É—é—Ç point-to-point –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **"Slice bounds out of range"**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - WireGuard TUN –Ω–∞ macOS —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 4 –±–∞–π—Ç–∞ offset

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**Point-to-Point –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**

TUN-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ macOS —Å–æ–∑–¥–∞—é—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏:
- **–°–µ—Ä–≤–µ—Ä (local)**: gateway IP (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10.0.0.1)
- **–ö–ª–∏–µ–Ω—Ç (destination)**: —Å–ª–µ–¥—É—é—â–∏–π IP (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10.0.0.2)

–ú–µ—Ç–æ–¥ `Next()` –∏–∑ –ø–∞–∫–µ—Ç–∞ `netip` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π IP-–∞–¥—Ä–µ—Å:
- `10.0.0.1.Next()` ‚Üí `10.0.0.2`
- `192.168.1.1.Next()` ‚Üí `192.168.1.2`

**WireGuard TUN Offset**

WireGuard TUN –Ω–∞ macOS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç offset –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å–ª—É–∂–µ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
- **4 –±–∞–π—Ç–∞** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π offset –¥–ª—è macOS
- **10 –±–∞–π—Ç** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `proxy.go` (VirtioNetHdrLen)

Offset —É–∫–∞–∑—ã–≤–∞–µ—Ç, —Å –∫–∞–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏ –≤ –±—É—Ñ–µ—Ä–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç–∞. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–µ—Ä–µ–¥ —ç—Ç–æ–π –ø–æ–∑–∏—Ü–∏–µ–π:

```
–ë—É—Ñ–µ—Ä: [header (4 bytes)][packet data (n bytes)]
                         ^
                         offset=4
```

**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**

–≠—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è macOS –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö:
- **Linux**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `tun_linux.go`
- **Windows**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `tun_windows.go`


## –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –≤–∫–ª–∞–¥—ã –≤:
- –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –£–ª—É—á—à–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

## –°—Å—ã–ª–∫–∏

- [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ MASQUE](https://datatracker.ietf.org/doc/draft-ietf-masque-connect-ip/)
- [–ü—Ä–æ—Ç–æ–∫–æ–ª QUIC](https://datatracker.ietf.org/doc/rfc9000/)
- [–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ quic-go](https://github.com/quic-go/quic-go)
- [–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ connect-ip-go](https://github.com/quic-go/connect-ip-go)

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ RFC

- **MASQUE CONNECT-IP**: [RFC 9484](https://datatracker.ietf.org/doc/html/rfc9484) - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ IP –≤ HTTP
- **MASQUE CONNECT-UDP**: [RFC 9298](https://datatracker.ietf.org/doc/html/rfc9298) - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ UDP –≤ HTTP
- **QUIC Transport**: [RFC 9000](https://datatracker.ietf.org/doc/html/rfc9000) - QUIC: –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ UDP
- **HTTP Datagrams**: [RFC 9297](https://datatracker.ietf.org/doc/html/rfc9297) - HTTP-–¥–∞—Ç–∞–≥—Ä–∞–º–º—ã –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª Capsule

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º:

* [quic-go](https://github.com/quic-go/quic-go) - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è QUIC –Ω–∞ Go
* [connect-ip-go](https://github.com/quic-go/connect-ip-go) - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ MASQUE CONNECT-IP –Ω–∞ Go

## –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π –ù–ò–£ –ú–≠–ò

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∫—É—Ä—Å–∞ –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ ¬´–ú–≠–ò¬ª (–ú–æ—Å–∫–æ–≤—Å–∫–∏–π —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç–∏—Ç—É—Ç) –ø–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (–ë–ê–° - –±–µ—Å–ø–∏–ª–æ—Ç–Ω—ã–µ –∞–≤–∏–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã).

### –°–≤—è–∑—å —Å —É—á–µ–±–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –ù–ò–£ –ú–≠–ò

–≠—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **MASQUE CONNECT-IP (RFC 9484)** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è IP-–ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ HTTP/3 (QUIC), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –≤ –∫—É—Ä—Å–µ –ù–ò–£ –ú–≠–ò ¬´–ö–∞–¥—Ä—ã –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º¬ª.

**–†–µ—Å—É—Ä—Å—ã –∫—É—Ä—Å–∞:**
- –ö—É—Ä—Å –Ω–∞ OpenEdu: [openedu.mpei.ru/course/BAS_2](https://openedu.mpei.ru/course/BAS_2)
- –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç: ¬´–ö–∞–¥—Ä—ã –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º¬ª

### –ü–æ—á–µ–º—É MASQUE –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º?

MASQUE CONNECT-IP —Ä–µ—à–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º:

1. **–û–±—Ö–æ–¥ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ç–µ–π**: –ú–Ω–æ–≥–∏–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç UDP-—Ç—Ä–∞—Ñ–∏–∫. MASQUE —Ç—É–Ω–Ω–µ–ª–∏—Ä—É–µ—Ç IP-–ø–∞–∫–µ—Ç—ã —á–µ—Ä–µ–∑ QUIC (UDP:443), –¥–µ–ª–∞—è –∏—Ö –ø–æ—Ö–æ–∂–∏–º–∏ –Ω–∞ HTTPS-—Ç—Ä–∞—Ñ–∏–∫ –∏ –æ–±—Ö–æ–¥—è —Ñ–∞–π—Ä–≤–æ–ª—ã.

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ QUIC (0-RTT, –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ) –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —á–µ–º —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ VPN-–ø—Ä–æ—Ç–æ–∫–æ–ª—ã –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö.

3. **–û—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞—Ö**: –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã—Ö VPN-—Ä–µ—à–µ–Ω–∏–π, MASQUE —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º IETF (RFC 9484), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –±—É–¥—É—â—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É.

### –¢–µ–º—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –¥–∏–ø–ª–æ–º–Ω—ã—Ö —Ä–∞–±–æ—Ç, –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–ª–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π:

#### 1. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ MASQUE VPN —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ VPN-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ (OpenVPN, WireGuard)
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏, –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ –¥–∂–∏—Ç—Ç–µ—Ä–∞ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- –ê–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π QUIC –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å VPN

#### 2. –û—Ü–µ–Ω–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –û—Ü–µ–Ω–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–Ω–æ–π TLS-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ê–Ω–∞–ª–∏–∑ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ PKI
- –ò–∑—É—á–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤ –¥–ª—è 0-RTT —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–æ–π BBRv3 –¥–ª—è MASQUE-—Ç—É–Ω–Ω–µ–ª–µ–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–ª–æ–º IP –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- –ò–∑—É—á–µ–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å VPN

#### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MASQUE VPN —Å –Ω–∞–∑–µ–º–Ω—ã–º–∏ —Å—Ç–∞–Ω—Ü–∏—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Ö—ç–Ω–¥–æ–≤–µ—Ä–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### 5. –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π MASQUE (CONNECT-UDP –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞–µ–≤)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ IPv6-—Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ò–ò

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è

**–ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å:**
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MASQUE VPN —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–ª–∏–µ–Ω—Ç–∞
2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ–∞–π—Ä–≤–æ–ª—ã
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–∑–∞–¥–µ—Ä–∂–∫–∞, –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å)

**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å:**
1. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–∏—Ç–∏–∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —ç–º—É–ª—è—Ü–∏–∏ —Å–µ—Ç–∏ (tc, netem)
4. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ VPN-—Ä–µ—à–µ–Ω–∏—è–º–∏

**–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å:**
1. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ü–µ–Ω–∫–∞ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
3. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è—Ö
4. –í–Ω–µ—Å–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç

### –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π

1. **–§–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**: –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Ñ–æ—Ä–∫ –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
2. **–ò–∑—É—á–∏—Ç–µ –∫–æ–¥**: –†–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –≤ `vpn_server/` –∏ `vpn_client/`
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–º—É–ª—è—Ü–∏—é —Å–µ—Ç–∏ –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
4. **–°–æ–±–∏—Ä–∞–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏**: –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –≤–∞—à–µ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**: –ü–∏—à–∏—Ç–µ –æ—Ç—á–µ—Ç—ã, —Å—Ä–∞–≤–Ω–∏–≤–∞—é—â–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö –ù–ò–£ –ú–≠–ò:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: [iselt/masque-vpn](https://github.com/iselt/masque-vpn)

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

- [CloudBridge QUIC Test Suite](https://github.com/twogc/quic-test) - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ QUIC
- [CloudBridge Research](https://cloudbridge-research.ru) - –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö

- [English](README_en.md) - English documentation
- [‰∏≠ÊñáÊñáÊ°£](README_zh.md) - Chinese documentation
